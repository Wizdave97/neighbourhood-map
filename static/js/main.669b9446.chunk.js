(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,n){e.exports={map:"mapcontainer_map__1ArPN",menu:"mapcontainer_menu__1-qtP"}},function(e,t,n){e.exports={listContainer:"listview_listContainer__6JEmv",list:"listview_list__3tbyZ",closeButton:"listview_closeButton__BMvhY"}},function(e,t,n){e.exports={container:"app_container__2zsb9",loader:"app_loader__13qo2",load2:"app_load2__2hw6A"}},function(e,t,n){e.exports={search:"searchInput_search__2DTGd",filter:"searchInput_filter__1tZ6I",searchContainer:"searchInput_searchContainer__1PSWz"}},,,function(e,t,n){e.exports={map:"map_map__2wQDv"}},function(e,t,n){e.exports=n.p+"static/media/menu.1d40ec10.svg"},function(e,t,n){e.exports={listitem:"listitem_listitem__2KW6h"}},function(e,t,n){e.exports=n(23)},,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o,a,i=n(0),r=n.n(i),s=n(12),l=n.n(s),c=(n(22),n(1)),u=n(2),d=n(6),p=n(4),m=n(3),f=n(5),h=n(9),g=n.n(h),y=n(7),w=n.n(y),v=n(13),_=n.n(v),b=function(e){var t=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}];return window.addEventListener("load",function(){e.googleMapsLoaded&&function(){var n=new e.google.maps.Map(document.getElementById(e.id),{center:{lat:40.7413549,lng:-73.9980244},zoom:14,styles:t,streetViewControl:!1,mapTypeControl:!1});window.map=n}()}),r.a.createElement("div",{id:e.id,className:_.a.map})},k=function(e){return new window.google.maps.Marker({position:e.position,id:e.id,title:e.name,animation:window.google.maps.Animation.DROP})},E=function(){return new window.google.maps.InfoWindow},x=function(e){(new window.google.maps.StreetViewService).getPanorama({location:e.position,radius:50},function(t,n){if("OK"===n){var o=new window.google.maps.StreetViewPanorama(document.getElementById("pano"));o.setPano(t.location.pano),o.setPov({heading:window.google.maps.geometry.spherical.computeHeading(t.location.latLng,e.position),pitch:30}),o.setVisible(!0)}else document.getElementById("pano").textContent="No Street View found"})},T=n(14),L=n.n(T),C=[],M=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={bounds:new n.props.google.maps.LatLngBounds},n.createMarkers=function(){var e,t=!0,o=!1,a=void 0;try{for(var i,r=n.props.locations[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;e=k(s),C.push(e),n.state.bounds.extend(e.position)}}catch(l){o=!0,a=l}finally{try{t||null==r.return||r.return()}finally{if(o)throw a}}window.markers=C},n.renderMarkers=function(){if(0!==C.length)for(var e=C,t=0;t<e.length;t++){e[t].setMap(null)}var o=[],a=!0,i=!1,r=void 0;try{for(var s,l=n.props.locations[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;o.push(c.name)}}catch(p){i=!0,r=p}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}for(var u=function(e){if(!o.includes(C[e].title))return"continue";setTimeout(function(){C[e].setMap(window.map)},300*e)},d=0;d<C.length;d++)u(d);window.map.fitBounds(n.state.bounds)},n.populateInfoWindow=function(){for(var e=null,t=E(),n=C,o=0;o<n.length;o++){n[o].addListener("click",function(){if(e!==this){for(var n=C,o=0;o<n.length;o++){var a=n[o];a!==this&&a.setAnimation(null)}var i=this;t.marker=this,t.setContent("<div>".concat(this.title,'<div id="pano" ></div><div>')),x(this),t.open(window.map,this),this.setAnimation(window.google.maps.Animation.BOUNCE),t.addListener("closeclick",function(){t.marker=null,e=null,i.setAnimation(null)}),e=this}})}},n.openList=function(){document.querySelector("#list-container").style.width="50%"},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){0===C.length&&(this.createMarkers(),this.populateInfoWindow()),this.renderMarkers()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:w.a.map},r.a.createElement("div",{className:w.a.menu,onClick:function(){return e.openList()}},r.a.createElement("img",{src:L.a,alt:"menu icon"})),r.a.createElement(b,{id:"map",googleMapsLoaded:this.props.googleMapsLoaded,map:w.a.map,google:this.props.google}))}}]),t}(r.a.PureComponent),N=n(8),S=n.n(N),I=n(10),O=n.n(I),B=function(e){return r.a.createElement("div",{className:O.a.searchContainer},r.a.createElement("input",{className:O.a.search,type:"text",value:e.query,onChange:function(t){return e.onQueryUpdate(t.target.value)},placeholder:"Search a location in London"}))},P=n(15),A=n.n(P),K=function(e){return r.a.createElement("li",{className:A.a.listitem,tabIndex:"0",onClick:function(){return e.moreInfo(e.id)}},e.location.name)},q=function(e){return r.a.createElement("div",{id:"list-container",className:S.a.listContainer},r.a.createElement("input",{type:"button",className:S.a.closeButton,value:"Close",onClick:function(){document.querySelector("#list-container").style.width="0"}}),r.a.createElement(B,{query:e.query,onQueryUpdate:e.onQueryUpdate}),r.a.createElement("ul",{className:S.a.list},e.locations.map(function(t,n){return r.a.createElement(K,{location:t,key:t.id,id:t.id,moreInfo:e.moreInfo})})))},j=function(e){var t=new window.google.maps.places.PlacesService(window.map);return new Promise(function(n,o){t.textSearch({query:e},function(e,o){"OK"===o&&t.getDetails({placeId:e[0].place_id,fields:["opening_hours","photo"]},function(e,t){n("OK"===t?{opening_hours:e.opening_hours,photos:e.photos}:"")})})})},U=function(e){function t(){var e,n;Object(c.a)(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={locations:[],errorLoadingData:!1,googleMapsLoaded:!1,google:null,menu:!1,query:""},n.onScriptload=function(){var e=Object(m.a)(n),t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?libraries=places,geometry,drawing&key=AIzaSyB590AsZEOF1dkep0N-vvAJ4PZHfpN_hxw&v=3",document.body.appendChild(t),t.addEventListener("load",function(){o=E(),e.setState(function(e){return{googleMapsLoaded:!e.googleMapsLoaded,google:window.google}})})},n.updateQuery=function(e){n.setState({query:e})},n.moreInfo=function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=function(){var t=r.value;if(t.setAnimation(null),t.id===e){if(a===t)return{v:void 0};j(t.title).then(function(e){var n="".concat(t.title,"<br>");e?(e.opening_hours&&(n+="<div>\n                ".concat(e.opening_hours.open_now?"Open Now<br>":"Closed<br>","\n                ").concat(e.opening_hours.weekday_text[0],"<br>\n                ").concat(e.opening_hours.weekday_text[1],"<br>\n                ").concat(e.opening_hours.weekday_text[2],"<br>\n                ").concat(e.opening_hours.weekday_text[3],"<br>\n                ").concat(e.opening_hours.weekday_text[4],"<br>\n                ").concat(e.opening_hours.weekday_text[5],"<br>\n              </div>")),e.photos&&(n+="<img src='".concat(e.photos[0].getUrl({maxHeight:100,maxWidth:200}),"'>")),o.setContent(n)):(o.setContent("".concat(t.title)),console.log(e)),o.open(window.map,t),t.setAnimation(window.google.maps.Animation.BOUNCE)}).catch(function(e){o.setContent("".concat(t.title))}),a=t,o.addListener("closeclick",function(){t.setAnimation(null)})}},l=window.markers[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var c=s();if("object"===typeof c)return c.v}}catch(u){n=!0,i=u}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.onScriptload(),fetch("https://api.foursquare.com/v2/venues/explore?near=London,UK&client_id=0TTKXNKQVRBEFNZCJM4YK0KU5N2OZF5XPWPEWJBK4YDS0G2P&client_secret=S2MNT5NTVP0BCSON4XBK51VFQKHJKW4UTUSKQGMII5XK1KUT&v=20190320",{method:"GET"}).then(function(e){return e.json()}).then(function(t){if(200===t.meta.code){var n=[],o=t.response.groups[0].items;if(0===o.length)return;var a=!0,i=!1,r=void 0;try{for(var s,l=o[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,u={};u.position={lat:c.venue.location.lat,lng:c.venue.location.lng},u.id=c.venue.id,u.name=c.venue.name,n.push(u)}}catch(d){i=!0,r=d}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}e.setState({locations:n})}}).catch(function(t){return e.setState(function(e){return{errorLoadingData:!e.errorLoadingData}})})}},{key:"render",value:function(){var e,t,n=new RegExp("".concat(this.state.query),"gi");return e=this.state.query?this.state.locations.filter(function(e){return n.test(e.name)}):this.state.locations,this.state.errorLoadingData&&!this.state.googleMapsLoaded?t=r.a.createElement("div",null,r.a.createElement("h4",null,"Network error check your connection and refresh",setTimeout(function(){window.location.reload()},3e3))):this.state.googleMapsLoaded?this.state.googleMapsLoaded&&(t=r.a.createElement("div",{className:g.a.container},r.a.createElement(q,{locations:e,query:this.state.query,onQueryUpdate:this.updateQuery,moreInfo:this.moreInfo}),r.a.createElement(M,{googleMapsLoaded:this.state.googleMapsLoaded,google:this.state.google,locations:e}))):t=r.a.createElement("div",{className:g.a.loader},"Loading..."),t}}]),t}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[16,1,2]]]);
//# sourceMappingURL=main.669b9446.chunk.js.map